@tailwind base;
@tailwind components;
@tailwind utilities;
@import "fonts";

/* This file is for your main application CSS */

@function random-range($min, $max) {
    @return floor(random() * ($max - $min + 1))+$min;
}

body {
    @apply bg-indigo-50 text-gray-900
}

.dark body {
    @apply bg-gray-800 text-indigo-200
}

.activenav {
    @apply bg-gray-900 text-white;
}

.inactivenav {
    @apply text-indigo-800 mx-4;
}

.dark .inactivenav {
    @apply text-gray-400 mx-4 hover:text-indigo-200;
}

.basics {
    font-family: "EB Garamond";
    @apply text-xl;
}

[x-cloak] {
    display: none;
}

@layer base {
    h1 {
        @apply text-4xl text-indigo-800 dark:text-indigo-50 my-5;
    }

    h2 {
        @apply text-3xl text-indigo-800 dark:text-indigo-50 my-3 capitalize underline;
    }

    h3 {
        @apply text-2xl text-indigo-800 dark:text-indigo-50 my-1;
    }

    h4 {
        @apply font-bold text-indigo-800 dark:text-indigo-50;
    }

    h5 {
        @apply text-sm text-indigo-800 dark:text-indigo-50;
    }

    a {
        @apply font-bold text-lg text-violet-600 dark:text-gray-300 hover:text-violet-500;
    }
}

.section {
    @apply bg-indigo-200 dark:bg-gray-800 rounded-lg border border-gray-700
}

.fooby {
    white-space: nowrap;
    @apply hover:text-indigo-900 dark:hover:text-white;
    @apply pr-2;

    i {
        @apply pl-1;
    }
}

.slim-accordion {
    @apply w-full flex justify-between items-center mb-1;
}

.slim-accordion span {
    @apply text-lg font-light uppercase;
}

.slim-accordion .line {
    @apply flex-grow border-t border-dotted border-current;
}

.slim-accordion i {
    @apply text-2xl;
}

/* Scene Posts */

#scenes-container {
    @apply fixed inset-0 top-[100px] overflow-hidden;
    bottom: 4rem;
}

#icecylee-container {
    @apply flex flex-row h-full gap-1;
}

#scene-left-col {
    @apply flex flex-col flex-1;
}

#scene-right-col {
    @apply overflow-y-auto bg-indigo-200 dark:bg-gray-900 rounded p-1;
}

#chat-posts-container {
    @apply flex-1 overflow-y-auto bg-indigo-300 dark:bg-gray-900 rounded px-4;
}

.post-container-icecylee {
    @apply flex flex-row;
}

.post-container-narrative {
    @apply rounded bg-purple-100 my-2 px-4 dark:bg-purple-900 border-l-8 border-purple-500;
}

.post-container-system {
    @apply rounded lg:rounded-full bg-blue-200 my-2 px-2 dark:bg-blue-900 border-l-8 border-blue-500;
}

.post-container-post {
    @apply text-lg;
}

.post-header-icecylee {
    @apply flex flex-col items-center;
}

.post-content-icecylee {
    @apply flex-1 p-1 flex flex-col justify-center relative;
}

.post-avatar-icecylee {
    @apply w-12 h-12 rounded m-2
}

.post-timestamp-with-ooc {
    @apply text-xs dark:text-gray-300 text-right mt-2;
}

.post-timestamp-no-ooc {
    @apply text-xs dark:text-gray-300 text-right mt-2;
    margin-top: 55px;
}

.post-ic-content-icecylee {
    @apply max-w-none;
    word-break: break-word;
}

.post-ic-content {
    @apply max-w-none;
    word-break: break-word;
}

.post-ic-content-icecylee p:first-of-type {
    display: inline;
}

.post-ic-content-icecylee li {
    list-style: inside;
}

.post-ic-authorspan {
    @apply font-bold;
}

.post-ooc-content-icecylee {
    @apply mt-2 p-2 text-sm italic text-gray-700 dark:text-gray-300;
}

.post-ooc-divider-icecylee {
    margin-top: 5px;
    margin-left: 100px;
    margin-right: 100px;
    border-top: 2px dotted #999;
}

#music a {
    @apply text-xl font-light text-indigo-800 dark:text-indigo-200 hover:underline;
    word-break: break-word;
}

.queue-song-button {
    @apply px-3 py-1 border border-indigo-900 hover:bg-indigo-100 border-2 dark:border-4 dark:hover:bg-purple-500 rounded-full text-lg;
}

.deckrow {
    td {
        @apply px-5 py-2
    }
}

#content-body h1 {
    @apply text-4xl text-indigo-800 dark:text-indigo-50 my-5;
}

#content-body h2 {
    @apply text-3xl text-indigo-800 dark:text-indigo-50 my-3;
    text-transform: none;
    text-decoration-line: underline;
}

#content-body h3 {
    @apply text-2xl font-bold text-indigo-800 dark:text-indigo-50 my-1;
}

#content-body h4 {
    @apply text-xl text-indigo-800 dark:text-indigo-50;
    font-weight: unset;
}

#content-body ul {
    list-style: inside;
}

#content-body ol {
    list-style: decimal;
}

#bonuses-text li {
    list-style: outside;
    text-align: start;
}

.formstyle {
    & .text {
        @apply bg-gray-50 border border-gray-800 text-gray-900 text-sm focus:border-blue-500 mx-3 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500
    }

    & .submit {
        @apply text-purple-700 hover:text-white border border-purple-700 hover:bg-purple-800 focus:ring-4 focus:outline-none focus:ring-purple-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:border-purple-400 dark:text-purple-400 dark:hover:text-white dark:hover:bg-purple-500 dark:focus:ring-purple-900
    }
}

.zoom {
    transform-origin: top center;
    transition: transform .2s;
    z-index: 0;
    /* Animation */
}

.zoom:hover {
    transform: scale(2.5);
    z-index: 50;
}

.zoom-physis {
    transform-origin: top center;
    transition: transform .2s;
    z-index: 0;
    /* Animation */
}

.zoom-physis:hover {
    transform: scale(2.5);
    z-index: 50;
}

.extant {
    @apply bg-gray-300 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600
}

.latent {
    @apply bg-gray-100 hover:bg-gray-200 dark:bg-gray-900 dark:hover:bg-gray-600
}

.glorified {
    @apply text-blue-700 dark:text-blue-300 bg-blue-300 hover:bg-blue-200 dark:bg-yellow-700 dark:hover:bg-yellow-600
}

.deckbuttons {
    min-height: 40px;
    @apply flex justify-evenly mt-1
}

.avatar-image {
    .selected {
        transform: scale(3);
    }
}

.handcontrol {
    @apply text-indigo-900 dark:text-purple-400 rounded-full border border-indigo-900 dark:border-purple-400 focus:ring-4 focus:outline-none focus:ring-purple-500 dark:focus:ring-purple-100 font-medium text-sm px-5 py-2.5 text-center mr-2 mb-2
}

.hand-view-link {
    @apply text-indigo-900 dark:text-indigo-300 hover:text-indigo-600 dark:hover:text-indigo-50 cursor-pointer
}

.avatar .manatick {
    width: 15px;
    height: 15px;
    background-color: #000;
    position: absolute;
    border-radius: 50%;
    left: 50%;
    top: 50%;
    margin-left: -5px;
    margin-top: -5px;
}

.avatar .pie {
    display: block;
    border-radius: 100%;
    width: 150px;
    height: 150px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

.avatar-dim {
    filter: saturate(0);
}

// Fallback for tooltips without explicit theme - applies default styling
.tippy-box:not([data-theme]) {
    background-color: #330033;
    border: 2px solid #ff00ff;

    .tippy-content {
        color: #fff;
        font-size: 24pt;
    }
}

// Default Tippy theme
.tippy-box[data-theme~='redacted'] {
    background-color: #330033;
    border: 2px solid #ff00ff;

    .tippy-content {
        color: #fff;
        font-size: 24pt;
    }
}

.text-redacted {
    color: #ceb900;
}

/* Gnosis color categories for NPC posts */
/* Red (Burning Gnosis) */
.text-burning-gnosis {
    color: #7f1d1d;
}

.dark .text-burning-gnosis {
    color: #fecaca;
}

.font-burning-gnosis {
    font-family: "Burning Gnosis", serif;
}

/* Green (Flourishing Gnosis) */
.text-flourishing-gnosis {
    color: #064e3b;
    /* light emerald-200 tinge */
}

.dark .text-flourishing-gnosis {
    color: #a7f3d0;
    /* dark emerald-900 tinge */
}

.font-flourishing-gnosis {
    font-family: "Flourishing Gnosis", serif;
    font-size: 32px;
}

/* Blue (Pellucid Gnosis) */
.text-pellucid-gnosis {
    color: #1e3a8a;

    /* light blue-200 tinge */
}

.dark .text-pellucid-gnosis {
    color: #aaccff;
    /* dark blue-900 tinge */
}

.font-pellucid-gnosis {
    font-family: "Pellucid Gnosis", serif;
}

/* White (Radiant Gnosis) - ochre/cream colors */
.text-radiant-gnosis {
    color: #78350f;
    /* light very-dark-ochre (amber-900) */
}

.dark .text-radiant-gnosis {
    color: #fef3c7;
    /* dark very-light-cream-gold (amber-100) */
}

.font-radiant-gnosis {
    font-family: "Radiant Gnosis", serif;
}

/* Black (Tenebrous Gnosis) - grey colors */
.text-tenebrous-gnosis {
    color: #000000;
    /* light very-dark-grey (gray-800) */
}

.dark .text-tenebrous-gnosis {
    color: #ffffff;
    /* dark very-light-grey (gray-200) */
}

.font-tenebrous-gnosis {
    font-family: "Tenebrous Gnosis", serif;
}

/* Alethic card back placeholder for Ceremony */
.card-back-placeholder {
    background: linear-gradient(135deg, #4a148c 0%, #1a0033 100%);
    border: 2px solid #9c27b0;
    border-radius: 8px;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 300px;
}

.card-back-placeholder .card-back-image {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}

.card-back-placeholder h4 {
    color: #fff;
    font-weight: bold;
    margin-bottom: 1rem;
    text-align: center;
}

.node-panel-redacted {
    font-family: 'Redacted Gnosis';
    color: #ceb900;
    font-size: 20pt;
}

// Custom 'butts' theme
.tippy-box[data-theme~='red'] {
    @apply bg-red-900 border border-red-500;

    .tippy-content {
        @apply text-red-400;
        font-size: 24pt;
        font-family: "Burning Gnosis";
    }
}

.node-red {
    font-family: 'Burning Gnosis';
}

.node-panel-red {
    font-family: 'Burning Gnosis';
    @apply text-red-400;
}

// Clickable connections in side panel
.clickable-connection {
    text-decoration: underline;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease;

    &:hover {
        background-color: rgba(139, 92, 246, 0.2) !important;
        transform: translateX(4px);
    }

    &:active {
        transform: translateX(2px);
    }
}

.tippy-box[data-theme~='green'] {
    @apply bg-emerald-900 border border-emerald-500;

    .tippy-content {
        @apply text-emerald-400;
        font-size: 24pt;
        font-family: "Flourishing Gnosis";
    }
}

.node-green {
    font-family: 'Flourishing Gnosis';
}

.node-panel-green {
    font-family: 'Flourishing Gnosis';
    @apply text-emerald-400;
}


.tippy-box[data-theme~='blue'] {
    @apply bg-blue-900 border border-blue-500;

    .tippy-content {
        @apply text-blue-400;
        font-size: 24pt;
        font-family: "Pellucid Gnosis";
    }
}

.node-blue {
    font-family: 'Pellucid Gnosis';
}

.node-panel-blue {
    font-family: 'Pellucid Gnosis';
    @apply text-blue-400;
}


.tippy-box[data-theme~='white'] {
    @apply bg-black border border-white;

    .tippy-content {
        @apply text-white;
        font-size: 24pt;
        font-family: "Radiant Gnosis";
    }
}

.node-white {
    font-family: 'Radiant Gnosis';
}

.node-panel-white {
    font-family: 'Radiant Gnosis';
    @apply text-white;
}

.tippy-box[data-theme~='black'] {
    @apply bg-purple-200 border border-white;

    .tippy-content {
        @apply text-black;
        font-size: 24pt;
        font-family: "Tenebrous Gnosis";
    }
}

.node-black {
    font-family: 'Tenebrous Gnosis';
}

.node-panel-black {
    font-family: 'Tenebrous Gnosis';
    @apply text-black;
}

.ascension-control {
    @apply grid grid-rows-1 grid-cols-1 lg:grid-cols-5
}

.ascension-signal {
    @apply flex flex-col
}

.ascension-signal img {
    @apply object-scale-down h-16
}

.ascension-dice {
    @apply grid grid-rows-3 gap-4 mx-2
}

.ascension-dicetext-primary {
    @apply text-2xl mx-2
}

// Base class with common button properties
.ascension-button-base {
    @apply py-1 px-2 border rounded hover:border-transparent
}

.ascension-button-red {
    @apply ascension-button-base bg-transparent hover:bg-red-800 dark:hover:bg-red-700 text-red-700 dark:text-red-500 hover:text-white border-red-500
}

.ascension-button-green {
    @apply ascension-button-base bg-transparent hover:bg-green-700 text-green-800 dark:text-green-500 hover:text-white border-green-500
}

.ascension-button-blue {
    @apply ascension-button-base bg-transparent hover:bg-blue-700 text-blue-800 dark:text-blue-500 hover:text-white border-blue-500
}

.ascension-button-white {
    @apply ascension-button-base bg-yellow-900 hover:bg-white text-yellow-200 hover:text-yellow-900 border-gray-300
}

.ascension-button-black {
    @apply ascension-button-base bg-black hover:bg-black text-white hover:font-bold border-transparent hover:border-white
}

.ascension-button-void {
    @apply ascension-button-base bg-purple-900 hover:bg-purple-700 text-purple-100 hover:text-white border-purple-500
}

.ascension-explanation {
    @apply col-span-3
}

.ascension-dice-hr {
    @apply border-t-2 border-dashed border-gray-600 py-2
}

.glow {
    -webkit-animation: glow 3s ease-in;
    -moz-animation: glow 3s ease-in;
    animation: glow 3s ease-in;
}

@keyframes glow {
    from {
        filter: blur(10px);
        color: #005500;
        text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e60073, 0 0 40px #e60073, 0 0 50px #e60073, 0 0 60px #e60073, 0 0 70px #e60073;
    }

    to {
        filter: blur(1px);
        color: rgb(234, 0, 255);
        text-shadow: 0 0 20px rgb(255, 2, 149), 0 0 30px #ff4da6, 0 0 40px #ff4da6, 0 0 50px #ff4da6, 0 0 60px #cc00c2, 0 0 70px #ff4da6, 0 0 80px #000000;
    }
}

.rollglow {
    -webkit-animation: rollglow 7s ease-in-out infinite alternate;
    -moz-animation: rollglow 7s ease-in-out infinite alternate;
    animation: rollglow 7s ease-in-out infinite alternate;
}

@keyframes rollglow {
    from {
        filter: saturate(8);
        filter: contrast(200%);
    }

    to {
        filter: saturate(0);
        filter: contrast(60%);
    }
}

.areteglow {
    -webkit-animation: areteglow 3s ease-in-out infinite alternate;
    -moz-animation: areteglow 3s ease-in-out infinite alternate;
    animation: areteglow 3s ease-in-out infinite alternate;
}

@keyframes areteglow {
    from {
        filter: saturate(5);
        text-shadow: 0 0 2px #FFF;

    }

    to {
        filter: saturate(1);
        text-shadow: 0 0 10px #000, 0 0 15px #222, 0 0 20px #555, 0 0 25px #999, 0 0 30px #AAA, 0 0 40px #CCC;

    }
}

.eligibleglow {
    -webkit-animation: eligibleglow 2s ease-in-out infinite alternate;
    -moz-animation: eligibleglow 2s ease-in-out infinite alternate;
    animation: eligibleglow 2s ease-in-out infinite alternate;
}

@keyframes eligibleglow {
    from {
        filter: saturate(2);
        -webkit-box-shadow: 0px 0px 100px 64px rgba(45, 255, 196, 0.56);
        -moz-box-shadow: 0px 0px 100px 64px rgba(45, 255, 196, 0.56);
        box-shadow: 0px 0px 100px 64px rgba(45, 255, 196, 0.56);
    }

    to {
        filter: saturate(0.5);
        -webkit-box-shadow: 0px 0px 250px 200px rgba(46, 130, 255, 0.13);
        -moz-box-shadow: 0px 0px 250px 200px rgba(46, 130, 255, 0.13);
        box-shadow: 0px 0px 250px 200px rgba(46, 130, 255, 0.13);
    }
}

.sourceglow {
    -webkit-animation: sourceglow 2s ease-in-out infinite alternate;
    -moz-animation: sourceglow 2s ease-in-out infinite alternate;
    animation: sourceglow 2s ease-in-out infinite alternate;
}

@keyframes sourceglow {
    from {
        -webkit-box-shadow: 0px 0px 100px 64px rgba(45, 255, 196, 0.56);
        -moz-box-shadow: 0px 0px 100px 64px rgba(45, 255, 196, 0.56);
        box-shadow: 0px 0px 50px 20px #ca00008a;
    }

    to {
        -webkit-box-shadow: 0px 0px 250px 200px rgba(46, 130, 255, 0.13);
        -moz-box-shadow: 0px 0px 250px 200px rgba(46, 130, 255, 0.13);
        box-shadow: 0px 0px 50px 20px rgba(46, 130, 255, 0.13);
    }
}

#lyrics-display {
    @apply whitespace-pre-wrap text-indigo-900 dark:text-gray-300 text-lg;
    position: relative;
    top: -80px;
    font-family: 'IBM Plex Mono', monospace;
    font-weight: 100;
    font-style: italic;
    text-align: center;
}

#lyrics-display code {
    @apply text-indigo-900 dark:text-gray-300 text-lg;
    font-family: 'IBM Plex Mono', monospace;
    font-weight: 100;
    font-style: italic;
    text-align: center;
}

.lyrics-alternate-font {
    font-family: 'Anaktoria' !important;
    font-size: 32px !important;
}

.lyrics-edit {
    font-family: 'IBM Plex Mono', monospace;
    font-weight: 100;
    font-style: italic;
    text-align: center;
}

#lyrics-display p {
    @apply mb-0;
}

#avatarmenu>svg {
    width: 100%;
    height: 100%;
}

#avatarmenu {
    height: 400px;
    width: 400px;
    margin: auto;
}

@media (max-width: 400px) {
    #avatarmenu {
        height: 300px;
        width: 300px;
    }
}

#temenosmenu>svg {
    width: 100%;
    height: 100%;
}

#temenosmenu {
    height: 400px;
    width: 400px;
    margin: auto;
}

@media (max-width: 400px) {
    #temenosmenu {
        height: 300px;
        width: 300px;
    }
}

#cardmenu>svg {
    width: 100%;
    height: 100%;
}

#cardmenu {
    height: 400px;
    width: 400px;
    margin: auto;
}

@media (max-width: 400px) {
    #cardmenu {
        height: 300px;
        width: 300px;
    }
}

/* Purple slider for Dragon controls */
input[type="range"].slider-purple {
    &::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        background: #9333ea;
        /* purple-600 */
        cursor: pointer;
        border-radius: 50%;
        border: 2px solid #c084fc;
        /* purple-400 */
    }

    &::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #9333ea;
        cursor: pointer;
        border-radius: 50%;
        border: 2px solid #c084fc;
    }

    &::-webkit-slider-runnable-track {
        background: linear-gradient(to right, #9333ea 0%, #9333ea var(--slider-value, 0%), #374151 var(--slider-value, 0%), #374151 100%);
        height: 8px;
        border-radius: 4px;
    }

    &::-moz-range-track {
        background: #374151;
        /* gray-700 */
        height: 8px;
        border-radius: 4px;
    }

    &::-moz-range-progress {
        background: #9333ea;
        height: 8px;
        border-radius: 4px;
    }
}

/* Resizable column drag handles */
.cursor-col-resize {
    cursor: col-resize !important;
}